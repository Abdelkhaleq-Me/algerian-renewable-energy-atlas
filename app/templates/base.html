<!DOCTYPE html>
<html lang="{{ g.lang }}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Algerian Renewable Energy Atlas{% endblock %}</title>
    <!-- Update favicon link tags -->
    <link rel="icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <link rel="shortcut icon" type="image/x-icon" href="{{ url_for('static', filename='images/favicon.ico') }}">
    <!-- For modern browsers -->
    <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='images/favicon-32x32.png') }}">
    <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='images/favicon-16x16.png') }}">
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/theme.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    {% block head_css %}{% endblock %}
    {% block head_js %}{% endblock %}
</head>
<body class="bg-background-primary text-text-primary dark:bg-background-secondary dark:text-text-secondary">
    <header class="bg-background-secondary dark:bg-background-tertiary shadow-md sticky top-0 z-50">
        <div class="container mx-auto px-4 py-3 flex justify-between items-center">
            <div class="logo">
                <a href="{{ url_for('home.index') }}" class="flex items-center">
                    <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Algerian Renewable Energy Atlas Logo" class="h-8 w-auto mr-2">
                    <span class="font-bold text-xl">ARE Atlas</span>
                </a>
            </div>
            <nav class="main-nav">
                <ul class="hidden md:flex space-x-6">
                    <li><a href="{{ url_for('home.index') }}" class="hover:text-primary dark:hover:text-primary-light transition-colors duration-200">{{ _('Home') }}</a></li>
                    <li><a href="{{ url_for('atlas.index') }}" class="hover:text-primary dark:hover:text-primary-light transition-colors duration-200">{{ _('Atlas') }}</a></li>
                    <li><a href="{{ url_for('download.index') }}" class="hover:text-primary dark:hover:text-primary-light transition-colors duration-200">{{ _('Download') }}</a></li>
                    <li><a href="{{ url_for('about.index') }}" class="hover:text-primary dark:hover:text-primary-light transition-colors duration-200">{{ _('About') }}</a></li>
                </ul>
            </nav>
            <div class="header-actions flex items-center space-x-4">
                <div class="search-bar hidden md:block">
                    <input type="search" placeholder="{{ _('Search...') }}" class="px-3 py-2 rounded-md border border-color-border dark:border-color-border bg-background-primary dark:bg-background-secondary text-text-primary dark:text-text-secondary focus:outline-none focus:ring-2 focus:ring-primary-light dark:focus:ring-primary-dark">
                </div>
                <div class="language-switcher relative">
                    <button id="lang-button" aria-haspopup="true" aria-expanded="false" class="flex items-center justify-center px-3 py-2 rounded-md border border-color-border dark:border-color-border bg-background-primary dark:bg-background-secondary text-text-primary dark:text-text-secondary hover:bg-background-tertiary dark:hover:bg-background-tertiary transition-colors duration-200">
                        <span class="mr-1">{{ g.language_name }}</span>
                        <svg class="h-4 w-4 fill-current" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z" clip-rule="evenodd" /></svg>
                    </button>
                    <div id="lang-dropdown" class="hidden absolute right-0 mt-2 w-32 rounded-md shadow-lg bg-background-primary dark:bg-background-secondary ring-1 ring-black ring-opacity-5 focus:outline-none" role="menu" aria-orientation="vertical" aria-labelledby="lang-button" tabindex="-1">
                        <div class="py-1" role="none">
                            <a href="{{ url_for(request.endpoint, lang='en') if request.endpoint else url_for('home.index', lang='en') }}" class="block px-4 py-2 text-sm text-text-primary dark:text-text-secondary hover:bg-background-tertiary dark:hover:bg-background-tertiary" role="menuitem" tabindex="-1" id="lang-option-english">English</a>
                            <a href="{{ url_for(request.endpoint, lang='fr') if request.endpoint else url_for('home.index', lang='fr') }}" class="block px-4 py-2 text-sm text-text-primary dark:text-text-secondary hover:bg-background-tertiary dark:hover:bg-background-tertiary" role="menuitem" tabindex="-1" id="lang-option-french">Français</a>
                            <a href="{{ url_for(request.endpoint, lang='ar') if request.endpoint else url_for('home.index', lang='ar') }}" class="block px-4 py-2 text-sm text-text-primary dark:text-text-secondary hover:bg-background-tertiary dark:hover:bg-background-tertiary" role="menuitem" tabindex="-1" id="lang-option-arabic">العربية</a>
                        </div>
                    </div>
                </div>
                <button id="theme-toggle" class="theme-switcher px-3 py-2 rounded-md border border-color-border dark:border-color-border bg-background-primary dark:bg-background-secondary text-text-primary dark:text-text-secondary hover:bg-background-tertiary dark:hover:bg-background-tertiary transition-colors duration-200" aria-label="Toggle Dark Mode">
                    <svg id="theme-icon-light" class="h-5 w-5 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1m-9 0h-1m-2.5 5.196l.707-.707m1 7.07l-.707-.707M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>
                    <svg id="theme-icon-dark" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path></svg>
                </button>
            </div>
        </div>
    </header>
    <main class="container px-4 py-8">
        {% block content %}{% endblock %}
    </main>
    <footer class="bg-background-secondary dark:bg-background-tertiary border-t border-color-border dark:border-color-border py-6">
        <div class="container mx-auto px-4 text-sm text-text-secondary dark:text-text-tertiary text-center">
            <div class="footer-nav mb-4">
                <a href="#" class="hover:text-primary dark:hover:text-primary-light px-2">{{ _('Privacy Policy') }}</a>
                <a href="#" class="hover:text-primary dark:hover:text-primary-light px-2">{{ _('Terms of Use') }}</a>
                <a href="{{ url_for('about.index') }}" class="hover:text-primary dark:hover:text-primary-light px-2">{{ _('About') }}</a>
                <a href="{{ url_for('contact.index') }}" class="hover:text-primary dark:hover:text-primary-light px-2">{{ _('Contact Us') }}</a>
            </div>
            <div class="social-links mb-4">
                <a href="#" class="hover:text-primary dark:hover:text-primary-light px-2"><i class="fab fa-facebook"></i></a>
                <a href="#" class="hover:text-primary dark:hover:text-primary-light px-2"><i class="fab fa-twitter"></i></a>
                <a href="#" class="hover:text-primary dark:hover:text-primary-light px-2"><i class="fab fa-linkedin"></i></a>
            </div>
            <div class="copyright">
                © {{ year }} Algerian Renewable Energy Atlas. {{ _('All rights reserved.') }}
            </div>
        </div>
    </footer>
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
    {% block body_js %}{% endblock %}
</body>
</html>
